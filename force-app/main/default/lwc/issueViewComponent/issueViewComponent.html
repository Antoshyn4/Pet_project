<template>
    <!-- Lightning Card -->
    <lightning-card variant="narrow" title="Remember The Issue" icon-name="standard:contract_payment">
        <!-- Sync Action -->
		<div class="slds-align_absolute-center" style="height:5rem">Date: <lightning-formatted-date-time value={dateValue}></lightning-formatted-date-time></div>
        <lightning-button class="slds-button new_issue_button slds-p-right_small"
				slot="actions"
				label="New Issue"
				onclick={showModalBox}
			></lightning-button>
        <lightning-button-icon class="refresh_button"
            slot="actions"
            icon-name="utility:sync"
            alternative-text="Refresh"
            onclick={refreshTodoList}
            title="Refresh">
        </lightning-button-icon>
        <lightning-layout>
            <lightning-layout-item size="12" padding="around-small">       
                <template if:true={processing}>
                    <lightning-spinner alternative-text="Loading" size="small"></lightning-spinner>
                </template>       
                <ul class="slds-has-dividers_around-space">
                    <template if:true={data}>
						<div class="myTable">
						<lightning-datatable data={data}
											 columns={columns}
											 key-field="id"
											 sorted-by={sortBy}
											 sorted-direction={sortDirection}
											 onsort={doSorting}
											 hide-checkbox-column="true"></lightning-datatable>
						</div>
					</template>
                </ul>
            </lightning-layout-item>
        </lightning-layout>
		<div slot="footer" style = "height: 30px;">
			<lightning-button class="slds-button new_issue_button slds-p-right_small"
				slot="actions"
				label="Previous Day"
				onclick={showPreviousDay}
			></lightning-button>
			<lightning-button class="slds-button new_issue_button slds-p-right_small"
				slot="actions"
				label="Next Day"
				onclick={showNextDay}
			></lightning-button>
		</div>
		<template if:true={isShowModal}>
		<section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
			<div class="slds-modal__container ">
			 <!-- modal header start -->
			   <header class="slds-modal__header">
				  <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={hideModalBox}>
					 <lightning-icon icon-name="utility:close"
						alternative-text="close"
						variant="inverse"
						size="small" ></lightning-icon>
					 <span class="slds-assistive-text">Close</span>
				  </button>
				  <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">New Issue</h2>
			   </header>
			   	<div class="slds-grid slds-no-flex">
					<div class=" slds-modal__content slds-p-around_medium slds-col slds-size_1-of-2" id="modal-content-id-1">
							<lightning-input label="Name" value={nameOfIssue} name="issueName" onchange={issueHandleChange}></lightning-input>
							<lightning-input label="Description" value={descriptionOfIssue} name="descriptionName" onchange={issueHandleChange}></lightning-input>
							<lightning-input label="Date to Do" value={dateOfIssue} name="dateToDoIssue" type="date" onchange={issueHandleChange}></lightning-input>
					</div>
					<div class=" slds-modal__content slds-p-around_medium slds-col slds-size_1-of-2" id="modal-content-id-2">

						<c-lookup-field-template
							errors={errors}
							onsearch={handleLookupSearch}
							onselectionchange={handleLookupSelectionChange}
							label="Family Member"
							is-multi-entry={isMultiEntry}
							new-record-options={newRecordOptions}
							required
						>
						</c-lookup-field-template>
					</div>
				</div>
			   <footer class="slds-modal__footer">
				  <button style="float: left;" class="slds-button slds-button_neutral" onclick={saveIssue}>Save Issue</button>
				  <button class="slds-button slds-button_neutral" onclick={hideModalBox}>Cancel</button>
			   </footer>
			</div>
		 </section>
		 <div class="slds-backdrop slds-backdrop_open"></div>
	  </template>				
    </lightning-card>
</template>